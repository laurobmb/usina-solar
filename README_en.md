-----

# âš¡ðŸŒžðŸŒž Distributed Solar Power Generation Dashboard ðŸŒžðŸŒžâš¡

This project is an interactive web dashboard built with **Flask** (Python) that allows you to visualize and analyze energy consumption, injection, and savings data for distributed solar energy generation system customers. It uses data from CSV files to generate dynamic charts and cost/savings tables.

## Project Overview

The main goal of this dashboard is to provide an intuitive tool for users to:

1.  **Select a year** for analysis.
2.  **Select a specific customer** within the chosen year.
3.  **Visualize charts** of energy consumed, energy injected, and compensated kWh throughout the months.
4.  **Analyze comparative tables** of energy costs with and without distributed generation, in addition to the savings generated.
5.  **View the total accumulated savings** for the selected year.

## How It Works

The project consists of three main parts:

1.  **Backend (Python - Flask):**

      * Manages the web application routes.
      * Reads data from CSV files (located in the `csv/` directory). Each CSV file represents a year and contains data for multiple customers.
      * Functions to `list_years()` and `list_customers()` available in the CSV files.
      * **`generate_chart()`:** Uses the `Plotly` library to create interactive line charts showing the customer's energy performance over time (Energy Consumed, Energy Injected, and Compensated kWh). The charts are generated in HTML to be embedded on the webpage and can also be saved as PNG images.
      * **`generate_table()`:** Processes customer data to calculate:
          * `COST_WITHOUT_DISTRIBUTED_GENERATION`: Energy Consumed \* kWh Value (fixed at $0.90).
          * `COST_WITH_DISTRIBUTED_GENERATION`: Billed Energy \* kWh Value.
          * `SAVINGS`: The difference between the two costs, showing the benefit of distributed generation.
          * Calculates the `total_savings` accumulated for the selected customer's year.

2.  **Frontend (HTML/CSS with Bootstrap):**

      * Single page (`index.html`) that functions as the dashboard.
      * Allows year and customer selection via dynamic `select` fields.
      * Displays the chart generated by the backend.
      * Displays the cost and savings table, including the total sum of annual savings.
      * The design is responsive, using the Bootstrap framework.

3.  **Data (CSV):**

      * Each customer's energy data is stored in CSV files, named by year (e.g., `2021.csv`, `2022.csv`, etc.).
      * The CSV format includes columns such as `MONTHLY_SITUATION` (month/year), `CUSTOMER_CODE`, `ENERGY_CONSUMED`, `ENERGY_INJECTED`, `BILLED_ENERGY`, `Compensated_kWh`, and `CREDIT`.

## Folder Structure

â”œâ”€â”€ app.py              \# Main Flask application  
â”œâ”€â”€ templates/  
â”‚   â””â”€â”€ index.html      \# Dashboard HTML template  
â”œâ”€â”€ static/  
â”‚   â””â”€â”€ style.css       \# (Assumed) CSS file for custom styles  
â”œâ”€â”€ csv/  
â”‚   â””â”€â”€ 2021.csv        \# Example annual data file  
â”‚   â””â”€â”€ 2022.csv  
â”‚   â””â”€â”€ ...  
â””â”€â”€ photos/             \# Directory to save chart images (optional)

## How to Run the Project (Using Podman)

1.  **Build the Docker/Podman image:**
    ```bash
    podman build -t usina_solar:v1 .
    ```
2.  **Run the container:**
    ```bash
    podman run -it --rm --name usina \
        -p 5000:5000 \
        -v ${PWD}/csv:/app/csv:Z \
        -v ${PWD}/photos:/app/photos:Z \
        -e VALOR_KWH=0.87 \
        usina_solar:v1
    ```
      * `-it`: Interactive and TTY mode.
      * `--rm`: Removes the container after exiting.
      * `--name usina`: Defines a name for the container.
      * `-p 5000:5000`: Maps port 5000 of the container to port 5000 of your machine.
      * `-v ${PWD}/csv:/app/csv:Z`: Mounts the local `csv` directory inside the container, allowing the application to access your data. `:Z` is specific to SELinux, adjusting security labels.

Once running, access `http://localhost:5000` in your browser to interact with the dashboard.

## Dependencies

The main Python libraries used are:

  * `Flask`: For web development.
  * `pandas`: For CSV data manipulation and analysis.
  * `plotly`: For interactive chart generation.
  * `os`: For file system operations.